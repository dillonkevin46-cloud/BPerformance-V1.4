<tr>
    <td>
        {% if ticket.status == 'COMP' %} <span class="badge bg-success">Completed</span>
        {% elif ticket.status == 'BLOCK' %} <span class="badge bg-danger">Blocker</span>
        {% elif ticket.status == 'PEND' %} <span class="badge bg-warning text-dark">Pending</span>
        {% elif ticket.status == 'HOLD' %} <span class="badge bg-secondary">On Hold</span>
        {% elif ticket.status == 'CALL' %} <span class="badge bg-warning text-dark border border-dark">Call Back</span>
        {% elif ticket.status == 'WAIT_ST' %} <span class="badge bg-info text-dark">Await Staff</span>
        {% else %} <span class="badge bg-light text-dark border">Await Client</span>
        {% endif %}
    </td>
    
    <td>
        <strong>{{ ticket.staff.full_name }}</strong><br>
        <small class="text-muted">{{ ticket.get_work_type_display }}</small>
        <div class="mt-1">
            {% if ticket.work_location == 'OFFICE' %} <span class="badge bg-light text-dark border"><i class="bi bi-building"></i> Office</span>
            {% elif ticket.work_location == 'HOME' %} <span class="badge bg-info text-dark"><i class="bi bi-house-door"></i> Home</span>
            {% else %} <span class="badge bg-warning text-dark"><i class="bi bi-car-front"></i> Hybrid</span>
            {% endif %}
        </div>
    </td>
    
    <td>
        <div>{{ ticket.client.name }}</div>
        <span class="badge bg-light text-dark border">{{ ticket.category.name }}</span>
    </td>
    
    <td>
        <div>{{ ticket.start_time|time:"H:i" }} - {{ ticket.end_time|time:"H:i" }}</div>
        <div class="fw-bold">{{ ticket.duration_display }}</div>
        
        <div class="mt-1">
            <span class="badge bg-light text-secondary border" title="Response Time (Wait)">
                <i class="bi bi-hourglass-split"></i> {{ ticket.response_time_display }}
            </span>
        </div>
    </td>
    
    <td style="width: 35%;">
        {{ ticket.description }}
        {% if ticket.travel_minutes > 0 %}
            <div class="mt-1 small text-muted border-top pt-1">
                <i class="bi bi-car-front text-warning"></i> 
                Travel: {{ ticket.travel_start_time|time:"H:i" }} - {{ ticket.travel_end_time|time:"H:i" }} 
                <strong>({{ ticket.travel_duration_display }})</strong>
            </div>
        {% endif %}
        {% if ticket.attachments.all %}
            <div class="mt-2 d-flex gap-2 flex-wrap">
                {% for att in ticket.attachments.all %}
                <a href="{{ att.file.url }}" target="_blank" class="badge bg-light text-primary border text-decoration-none p-2">
                    <i class="bi bi-paperclip"></i> {{ att.filename }}
                </a>
                {% endfor %}
            </div>
        {% endif %}
        {% if ticket.manager_ticket_notes %}
            <div class="alert alert-light border mt-2 p-1 small mb-0">
                <strong><i class="bi bi-pencil"></i> Note:</strong> {{ ticket.manager_ticket_notes }}
            </div>
        {% endif %}
    </td>
    
    <td class="text-end">
        <button class="btn btn-sm btn-outline-secondary" 
                hx-get="{% url 'htmx_get_edit_form' ticket.id %}"
                hx-target="closest tr"
                hx-swap="outerHTML">
            <i class="bi bi-pencil-square"></i>
        </button>
    </td>
    
    <td class="text-end">
        <button class="btn btn-sm btn-outline-danger" 
                hx-post="{% url 'htmx_delete_ticket' ticket.id %}"
                hx-confirm="Are you sure you want to delete this ticket?"
                hx-target="closest tr"
                hx-swap="outerHTML">
            <i class="bi bi-trash"></i>
        </button>
    </td>
</tr>